<?xml version="1.0" encoding="UTF-8"?>

<!--
 * See the NOTICE file distributed with this work for additional
 * information regarding copyright ownership.
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see http://www.gnu.org/licenses/
-->

<xwikidoc version="1.1">
  <web>PhenoTips</web>
  <name>SimilarCases</name>
  <language/>
  <defaultLanguage/>
  <translation>0</translation>
  <creator>xwiki:XWiki.Admin</creator>
  <creationDate>1393098154000</creationDate>
  <parent>PhenoTips.WebHome</parent>
  <author>xwiki:XWiki.Admin</author>
  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>
  <date>1396352668000</date>
  <contentUpdateDate>1396350913000</contentUpdateDate>
  <version>1.1</version>
  <title/>
  <comment/>
  <minorEdit>false</minorEdit>
  <syntaxId>xwiki/2.1</syntaxId>
  <hidden>false</hidden>
  <content>{{velocity}}
(% class="" id="similar-cases-container"%)(((##
#if ($xcontext.action == 'view' &amp;&amp; $xwiki.hasAccessLevel('view', $xcontext.user, 'PhenoTips.SimilarCases'))
  #if (!$services.patientconsents.hasConsent($doc.getName(), "real"))
    #break
  #end
  #set ($suggestionsConfig = $xwiki.getDocument("${doc.space}.SimilarCasesConfiguration").getObject('PhenoTips.SimilarCases'))
  #if ($suggestionsConfig &amp;&amp; "$!{suggestionsConfig.getProperty('enable').value}" == '1')
    #set ($patient = $services.patients.get($doc.name))
    #set ($patientAccess = $services.permissions.getEntityAccess($patient.id))
    #if (!($patient.features.isEmpty() &amp;&amp; $patient.genes.isEmpty()) &amp;&amp; $patientAccess.getVisibility().compareTo($services.permissions.resolveVisibility('matchable')) &gt;= 0)
      ## Can see similar cases for this patient
      $xwiki.jsx.use('PhenoTips.SimilarCases', {'minify' : false})##
      $xwiki.ssx.use('PhenoTips.SimilarCases')##
      $xwiki.ssx.use('PhenoTips.PatientSheetCode')##
      $xwiki.jsx.use($doc.fullName, {'minify' : false})##
      #set ($max_results = "$!{suggestionsConfig.getProperty('max_results').value}")
      #set ($min_score = "$!{suggestionsConfig.getProperty('min_score').value}")
      ##
      (% class="clear clinical-info similarity-info chapter"%)(((##
      {{html clean=false}}&lt;div class="hidden"&gt;&lt;input type="hidden" id="similarity_results__max_results" value="${max_results}"/&gt;&lt;input type="hidden" id="similarity_results__min_score" value="${min_score}"/&gt;&lt;/div&gt;{{/html}}##
        {{include reference="MatchingNotification.MatchesTable" /}}
      )))
    #end## can see similar patients
  #end## suggestions enabled
#end## action == view
{{/velocity}}
  </content>
  <class>
    <name>PhenoTips.SimilarCases</name>
    <customClass/>
    <customMapping/>
    <defaultViewSheet/>
    <defaultEditSheet/>
    <defaultWeb/>
    <nameField/>
    <validationScript/>
    <enable>
      <customDisplay/>
      <defaultValue/>
      <disabled>0</disabled>
      <displayFormType>checkbox</displayFormType>
      <displayType/>
      <name>enable</name>
      <number>1</number>
      <prettyName>Enable similar cases suggestions</prettyName>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
    </enable>
    <max_results>
      <customDisplay/>
      <disabled>0</disabled>
      <name>max_results</name>
      <number>2</number>
      <numberType>integer</numberType>
      <prettyName>Maximum numbers of results to show</prettyName>
      <size>3</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.NumberClass</classType>
    </max_results>
    <min_score>
      <customDisplay/>
      <disabled>0</disabled>
      <name>min_score</name>
      <number>3</number>
      <numberType>float</numberType>
      <prettyName>Minimum relevance score of retrieved suggestions (between 0 and 1)</prettyName>
      <size>3</size>
      <unmodifiable>0</unmodifiable>
      <validationMessage/>
      <validationRegExp/>
      <classType>com.xpn.xwiki.objects.classes.NumberClass</classType>
    </min_score>
  </class>
  <object>
    <name>PhenoTips.SimilarCases</name>
    <number>0</number>
    <className>XWiki.JavaScriptExtension</className>
    <guid>9f32c038-3885-430b-b820-c088c0b5940a</guid>
    <class>
      <name>XWiki.JavaScriptExtension</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <cache>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>cache</name>
        <number>5</number>
        <prettyName>Caching policy</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>long|short|default|forbid</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </cache>
      <code>
        <disabled>0</disabled>
        <name>code</name>
        <number>2</number>
        <prettyName>Code</prettyName>
        <rows>20</rows>
        <size>50</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </code>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
      <parse>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>parse</name>
        <number>4</number>
        <prettyName>Parse content</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </parse>
      <use>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>use</name>
        <number>3</number>
        <prettyName>Use this extension</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>currentPage=Always on this page|onDemand=On demand|always=Always on this wiki</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </use>
    </class>
    <property>
      <cache>long</cache>
    </property>
    <property>
      <code>var PhenoTips = (function (PhenoTips) {
  var generateTabs = function (onSimilarCasesPage) {

    var _generateSimilarCasesTab = function (isActive) {
      var tab = _generateTab(
        'similar-cases-tab', // element id
        isActive,
        "$escapetool.javascript($services.localization.render('phenotips.similarCases.title'))", //displayed text
        XWiki.currentDocument.getURL('view', 'sheet=PhenoTips.SimilarCases') // url for inactive tabs
      );

      if (!isActive) {
        tab.observe('click', function(event) {
          event.stop();
          PhenoTips.widgets.FormUtils.getFormState().saveIfFormDirty( function () {
            window.location = event.findElement().href;
          });
        });
      }

      return tab;
    };

    var _generateInactivePatientsTab = function () {
      return _generateTab(
        'document-title',
        false,
        XWiki.currentDocument.page,
        XWiki.currentDocument.getURL(XWiki.contextaction)
      );
    };

    var _generateTab = function (id, isActive, text, url) {
      var elt = new Element('div', {'class' : 'title-tab' + (isActive? ' active' : ''), id : id});
      if (isActive) {
        var title = new Element('h1').update(text)
        elt.update(title);
      } else {
        var link = new Element('a', {'href' : url});
        link.update(text);
        elt.update(link);
      }
      return elt;
    };

    var _hideElement = function (id) {
      $(id) &amp;&amp; $(id).hide();
    };

    if (onSimilarCasesPage) {
      $('body').addClassName('matching-patients');
      // Change patient's page tab to be inactive
      $('document-head') &amp;&amp; $('document-title').insert({after: _generateInactivePatientsTab()});
      $('document-title') &amp;&amp; $('document-title').remove();
      ['document-authors', 'patient-record-actions', $$('.bottombuttons')[0]].each(_hideElement);
    }

    // Add a new tab in the title bar
    $('document-head') &amp;&amp; $('document-title').insert({after: _generateSimilarCasesTab(onSimilarCasesPage)});
  };

  var fetchConsents = function(callback) {
    // Get local concents via REST and check if "real" consent is granted
    new Ajax.Request(XWiki.contextPath + "/rest/patients/" + XWiki.currentDocument.page + "/consents?method=get", {
      onSuccess : function(response) {
        var consents = response.responseJSON;
        if (!consents || consents.length == 0) {
          return;
        }
        // if "real" consent not granted - generate tab
        var realGranted = consents.filter( function(consent) { return consent.id == "real" &amp;&amp; consent.status == "yes"; } );
        if (realGranted.length &gt; 0) {
          callback(false);
        }
      }
    });
  };

  var init = function() {
    // Quick hack to confirm we're on a patient page and widgets.Matcher is not initialized yet:
    if (!$('patient-record-actions') || $('similar-cases-tab')) {
      return;
    }

    var onSimilarCasesPage = $('similar-cases-container');

    if (onSimilarCasesPage) {
      generateTabs(onSimilarCasesPage);
    } else {
      // Matched patiens tab is not active
      // generate the tab for similar cases only if the "real" consent is granted

      // if consents are already available from the patient page
      if ($('patient-consents-json')) {
        // Check all required "real" conscent:
        var consents = [];
        try {
          consents = JSON.parse($('patient-consents-json').value);
        } catch(err) {
          console &amp;&amp; console.log(err);
        }

        if (!consents || consents.length == 0) {
          return;
        }

        var realGranted = consents.filter( function(consent) { return consent.id == "real" &amp;&amp; consent.status == "yes"; } );
        if (realGranted.length &gt; 0) {
          generateTabs(onSimilarCasesPage);
        }
      } else {
        fetchConsents(generateTabs)
      }
    }
  };

  (XWiki &amp;&amp; XWiki.domIsLoaded &amp;&amp; init()) || document.observe("xwiki:dom:loaded", init);

  // End PhenoTips augmentation.
  return PhenoTips;
}(PhenoTips || {}));</code>
    </property>
    <property>
      <name>Similar cases suggestions code</name>
    </property>
    <property>
      <parse>1</parse>
    </property>
    <property>
      <use>always</use>
    </property>
  </object>
  <object>
    <name>PhenoTips.SimilarCases</name>
    <number>0</number>
    <className>XWiki.StyleSheetExtension</className>
    <guid>314a760a-1ec1-46d2-a262-b728dd8e61f9</guid>
    <class>
      <name>XWiki.StyleSheetExtension</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <cache>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>cache</name>
        <number>5</number>
        <prettyName>Caching policy</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>long|short|default|forbid</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </cache>
      <code>
        <disabled>0</disabled>
        <name>code</name>
        <number>2</number>
        <prettyName>Code</prettyName>
        <rows>20</rows>
        <size>50</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </code>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
      <parse>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>parse</name>
        <number>4</number>
        <prettyName>Parse content</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </parse>
      <use>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>use</name>
        <number>3</number>
        <prettyName>Use this extension</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>currentPage=Always on this page|onDemand=On demand|always=Always on this wiki</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </use>
    </class>
    <property>
      <cache>long</cache>
    </property>
    <property>
      <code>#template("colorThemeInit.vm")

.chapter.similarity-info .action-edit {
  display: none !important;
}
.similarity-results-refresh,
.similarity-results-disclaimer {
  float: right;
}
.similarity-results-container {
  clear: both;
  min-height: 3em;
  margin-bottom: .5em;
}
.similarity-results-button-container {
  float: right;
}
.chapter.similarity-info .similar-cases-category {
  margin-top: 3.5em;
}
.chapter.similarity-info h3 {
  border: 0 none;
}
.similarity-results-container .similarity-results {
  border: 0 none;
  margin: 1em 0 0;
  width: 100%;
  position: relative;
}
.similarity-results th {
  border: 0 none;
  background: transparent
}
.similarity-results th.details {
  text-align: right;
  width: 300px;
}
.similarity-results td {
  border: 0 none;
  border-top: 1px solid $theme.borderColor;
  text-align: left;
  vertical-align: baseline;
}
.similarity-results &gt; tr &gt; td {
  padding-bottom: 0;
}
.similarity-results &gt; tr &gt; td.details-only {
  border-top: 0 none;
  padding-bottom: 0.3em;
  padding-top: 0;
}
.similarity-results .unknown, .similarity-results .no-match , .similarity-results .metadata, .similarity-results .tool {
  font-size: .9em;
  font-style: italic;
}
.similarity-results .unknown {
  opacity: .6;
}
.similarity-results .no-match {
  color: $theme.notificationErrorColor;
}
.similarity-results td.access {
  width: 16px;
}
.similarity-results td.contact {
  opacity: 1;
}
#similar-prototypes-container .contact {
  display: none;
}
.similarity-results td.contact .owner-info {
  background: transparent none left top no-repeat;
}
.similarity-results .metadata {
  display: block;
}
.similarity-results td.contact .owner-info .metadata {
  opacity: .6;
  padding-left: 1.6em;
}
.similarity-results td.diagnosis ul {
  list-style-type: none;
  margin: 0;
}
.similarity-results td.match {
  padding-left: 3px;
  padding-right: 3px;
  text-align: center;
}
.similarity-results .details th.hint.result, .similarity-results .details th.hint.query {
  text-align: center;
}
.similarity-results .details .summary {
  text-align: right;
}
.similarity-results .details .summary .buttonwrapper {
  margin: 0;
}
.similarity-results .details .summary .button {
  white-space: nowrap;
}
.similarity-results .details .match-details {
  background: #FFF;
  border: 1px solid #DDD;
  margin-top: 10px;
  padding: 5px 1em;
  position: relative;
  z-index: 100;
  box-shadow: 0 1px 4px rgba(0, 0, 0, .5);
  width: 60%;
  float: right;
}
.similarity-results .details .match-details:before, .similarity-results .details .match-details:after {
  content: "";
  display: block;
  width: 0;
  height: 0;
  position: absolute;
  top: -10.5px;
  right: 9px;
  border: 11px solid transparent;
  border-top: 0 none;
  border-bottom-color: #DDD;
}
.similarity-results .details .match-details:after {
  top: -9.5px;
  right: 10px;
  border: 10px solid transparent;
  border-top: 0 none;
  border-bottom-color: #FFF;
}
.similarity-results .details table {
  margin: 0;
  width: 100%;
}
.similarity-results .details .match-type {
  display: inline-block;
  vertical-align: top;
  box-sizing: border-box;
  padding-right: 5px;
  padding-left: 5px;
  margin-bottom: 10px;
  min-width: 100%;
}
.similarity-results .details th.match-category-header {
  font-size: 1em;
  text-transform: uppercase;
  text-align: center;
  padding: 1.2em 0 .5em 0;
  background-color: white;
  font-weight: normal;
}
.similarity-results .details table th {
  border-bottom: 1px solid $theme.borderColor !important;
  font-size: 0.8em;
  text-transform: uppercase;
  font-weight: 700;
  background-color: #F6F8F9;
}
.similarity-results .details table td {
  border: 0 none !important;
  vertical-align: baseline !important;
  padding: .5em;
}
.similarity-results .details table th.phenotype-category, .similarity-results .details table th.gene {
  text-align: center;
  padding-top: 6px;
  padding-bottom: 6px;
  position: relative; /* Allow absolute positioning of buttons within this container */
}
.similarity-results .details .negative {
  color: $theme.notificationErrorColor;
}
.similarity-results .details .metadata {
  color: $theme.notificationInfoColor;
}
.similarity-results .details ul.metadata {
  margin: 0 2em;
  list-style-type: none;
}
.similarity-results .details ul.metadata li {
  line-height: 1.1em;
}
.similarity-results .details .tool {
  color: $theme.linkColor;
  cursor: pointer;
}
.similarity-info .refresh-matches-button {
  margin-left: 5px;
  white-space: nowrap;
}
.similarity-info .pagesizeselect {
  margin-left: 5px;
}
.similarity-info a.pagenumber {
  margin-left: 5px;
}
.match-type .block {
  display: inline-block;
  width: 100%;
}
.similarity-results-container-local {
  margin-top: -3em;
}
.similarity-results-container-local .similarity-results-container {
  padding-top: 1em;
}</code>
    </property>
    <property>
      <name>Similar cases suggestions style</name>
    </property>
    <property>
      <parse>1</parse>
    </property>
    <property>
      <use>currentPage</use>
    </property>
  </object>
  <object>
    <name>PhenoTips.SimilarCases</name>
    <number>2</number>
    <className>XWiki.StyleSheetExtension</className>
    <guid>fbd8e808-942d-40f2-9478-ef83760355c8</guid>
    <class>
      <name>XWiki.StyleSheetExtension</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <cache>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>cache</name>
        <number>5</number>
        <prettyName>Caching policy</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>long|short|default|forbid</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </cache>
      <code>
        <disabled>0</disabled>
        <name>code</name>
        <number>2</number>
        <prettyName>Code</prettyName>
        <rows>20</rows>
        <size>50</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </code>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
      <parse>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>parse</name>
        <number>4</number>
        <prettyName>Parse content</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </parse>
      <use>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>use</name>
        <number>3</number>
        <prettyName>Use this extension</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>currentPage=Always on this page|onDemand=On demand|always=Always on this wiki</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </use>
    </class>
    <property>
      <cache>long</cache>
    </property>
    <property>
      <code>#template("colorThemeInit.vm")

.match-details table.phenotype-matches&gt;tr:nth-child(2n+1) {
  background-color: #f9f9f9;
  color: #000;
  text-shadow: none;
  text-align: center;
}
.match-details table.phenotype-matches&gt;tr:nth-child(2n){
  background-color: transparent;
}
.match-details table.phenotype-matches&gt;tr:nth-child(2n)&gt;td {
  padding-bottom: 0;
}
.match-details table.phenotype-matches&gt;tr:nth-child(2n)&gt;td {
  padding-top: 0;
}

.match-details table.age-of-onset &gt; tr &gt; td,
.match-details table.mode-of-inheritance &gt; tr &gt; td {
  padding-top: 0;
  padding-bottom: 0;
  background-color: $theme.menuLinkColor;
}

.match-details table &gt; tr &gt; td.result {
  background: $theme.highlightColor;
}

.variants-toggle {
  position: absolute;
  right: 0;
  margin-top: -3px; /*Accounting for the width of the border (1px) and the padding top (2px) to align the text of the button with the gene name */
}
.match-details .variants-data .segmented-bar .segmented-unit-fill {
    background-color: $theme.notificationErrorColor;
}
.match-details .phenotype-matches .segmented-bar .segmented-unit-fill {
    background-color: $theme.menuLinkColor;
}

.match-details .segmented-bar {
    color: white;
}
.match-details .variants-data .segmented-bar,
.match-details .phenotype-matches .segmented-bar {
    float: right;
}
.match-details .variants-data .segmented-bar {
    color: $theme.notificationErrorColor;
    font-size: .87em;
}
.match-details table.phenotype-matches .query,
.match-details table.phenotype-matches .result {
  text-align: left;
}
.match-details table .table-data {
  padding-left: 1em !important;
}</code>
    </property>
    <property>
      <name>New matches style</name>
    </property>
    <property>
      <parse>1</parse>
    </property>
    <property>
      <use>currentPage</use>
    </property>
  </object>
  <object>
    <name>PhenoTips.SimilarCases</name>
    <number>3</number>
    <className>XWiki.StyleSheetExtension</className>
    <guid>fbd8e808-942d-40f2-9478-ef83760355c8</guid>
    <class>
      <name>XWiki.StyleSheetExtension</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <cache>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>cache</name>
        <number>5</number>
        <prettyName>Caching policy</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>long|short|default|forbid</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </cache>
      <code>
        <disabled>0</disabled>
        <name>code</name>
        <number>2</number>
        <prettyName>Code</prettyName>
        <rows>20</rows>
        <size>50</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </code>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
      <parse>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>parse</name>
        <number>4</number>
        <prettyName>Parse content</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </parse>
      <use>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>use</name>
        <number>3</number>
        <prettyName>Use this extension</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>currentPage=Always on this page|onDemand=On demand|always=Always on this wiki</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </use>
    </class>
    <property>
      <cache>long</cache>
    </property>
    <property>
      <code>#template("colorThemeInit.vm")

.space-data.matching-patients #mainContentArea {
  border-top: .4em solid $theme.menuGradientColor;
  background: #FFFFFF;
}
.matching-patients #similar-cases-container .label, .matching-patients #similar-cases-container label {
  font-weight: normal;
  width: 100%;
  display: inline;
}
.space-data.matching-patients #document-head {
  margin-top: -3.3em;
}
.space-data #document-head .title-tab {
  margin: 0 0 0 1px !important;
}
.space-data #document-head .title-tab:not(.active) {
  background-color: $theme.buttonPrimaryBackgroundColor;
  background-image: none;
  #css3_backgroundLinearGradient({
     'to': 'bottom',
     'colors': [
      {'color': $theme.buttonPrimaryGradientColor, 'position': '0%'},
      {'color': $theme.buttonPrimaryBackgroundColor, 'position': '100%'}
    ]
  })
  font-weight: normal;
}
.space-data #document-head .title-tab a {
  color: $theme.buttonPrimaryTextColor;
}
.space-data #document-head .title-tab a:hover {
  color: $theme.buttonPrimaryTextColor;
}
.space-data #document-title.active {
  margin-left: 0;
}
</code>
    </property>
    <property>
      <name>Tab style</name>
    </property>
    <property>
      <parse>1</parse>
    </property>
    <property>
      <use>always</use>
    </property>
  </object>
</xwikidoc>
